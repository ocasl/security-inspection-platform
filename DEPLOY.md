# Cloudflare Pages éƒ¨ç½²æŒ‡å—

## ğŸ“‹ Cloudflare Pages æ„å»ºé…ç½®

åœ¨ Cloudflare Pages æ§åˆ¶å°ä¸­ï¼Œä½¿ç”¨ä»¥ä¸‹é…ç½®ï¼š

### æ„å»ºè®¾ç½®

```
æ¡†æ¶é¢„è®¾: Next.js (Static HTML Export)
æ„å»ºå‘½ä»¤: pnpm build
æ„å»ºè¾“å‡ºç›®å½•: out
æ ¹ç›®å½•: /
Node.js ç‰ˆæœ¬: 18
åŒ…ç®¡ç†å™¨: pnpm
```

### ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦ï¼Œå¯ä»¥æ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

```
NODE_VERSION=18
SKIP_INSTALL_DEPS=false
```

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### æ–¹æ³•ä¸€ï¼šé€šè¿‡ Cloudflare Dashboard

1. ç™»å½• [Cloudflare Dashboard](https://dash.cloudflare.com/)
2. è¿›å…¥ **Pages** é¡µé¢
3. ç‚¹å‡» **Create a project**
4. è¿æ¥ä½ çš„ Git ä»“åº“ï¼ˆGitHub/GitLabï¼‰
5. é€‰æ‹©ä½ çš„é¡¹ç›®ä»“åº“
6. é…ç½®æ„å»ºè®¾ç½®ï¼ˆä½¿ç”¨ä¸Šé¢çš„é…ç½®ï¼‰
7. ç‚¹å‡» **Save and Deploy**

### æ–¹æ³•äºŒï¼šä½¿ç”¨ Wrangler CLI

```bash
# å®‰è£… Wrangler
npm install -g wrangler

# ç™»å½• Cloudflare
wrangler login

# æ„å»ºé¡¹ç›®
pnpm build

# éƒ¨ç½²åˆ° Cloudflare Pages
wrangler pages deploy out --project-name=security-inspection-platform
```

## ğŸ“ é…ç½®è¯´æ˜

### Next.js é…ç½® (next.config.mjs)

é¡¹ç›®å·²é…ç½®ä¸ºé™æ€å¯¼å‡ºæ¨¡å¼ï¼š

```javascript
output: 'export'           // å¯ç”¨é™æ€å¯¼å‡º
trailingSlash: true        // URL ä»¥æ–œæ ç»“å°¾
images: {
  unoptimized: true        // ç¦ç”¨å›¾åƒä¼˜åŒ–ï¼ˆCF Pages ä¸æ”¯æŒï¼‰
}
```

### æ„å»ºäº§ç‰©

- æ„å»ºå‘½ä»¤ä¼šç”Ÿæˆé™æ€æ–‡ä»¶åˆ° `out` ç›®å½•
- æ‰€æœ‰é¡µé¢éƒ½ä¼šé¢„æ¸²æŸ“ä¸ºé™æ€ HTML
- æ”¯æŒå®¢æˆ·ç«¯è·¯ç”±å’ŒåŠ¨æ€äº¤äº’

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **é™æ€å¯¼å‡ºé™åˆ¶**ï¼š
   - ä¸æ”¯æŒ Next.js API Routes
   - ä¸æ”¯æŒæœåŠ¡å™¨ç«¯æ¸²æŸ“ (SSR)
   - ä¸æ”¯æŒå›¾åƒä¼˜åŒ–
   - ä¸æ”¯æŒ ISRï¼ˆå¢é‡é™æ€å†ç”Ÿæˆï¼‰

2. **å·²å¤„ç†çš„å…¼å®¹æ€§**ï¼š
   - âœ… ç§»é™¤äº† Vercel Analytics
   - âœ… é…ç½®äº†é™æ€å¯¼å‡º
   - âœ… ç¦ç”¨äº†å›¾åƒä¼˜åŒ–
   - âœ… æ‰€æœ‰é¡µé¢éƒ½æ˜¯å®¢æˆ·ç«¯ç»„ä»¶æˆ–é™æ€é¡µé¢

3. **æ€§èƒ½ä¼˜åŒ–**ï¼š
   - Cloudflare Pages æä¾›å…¨çƒ CDN
   - è‡ªåŠ¨ HTTPS
   - è‡ªåŠ¨é¢„è§ˆéƒ¨ç½²

## ğŸ”§ æœ¬åœ°æµ‹è¯•é™æ€å¯¼å‡º

åœ¨éƒ¨ç½²å‰ï¼Œå¯ä»¥æœ¬åœ°æµ‹è¯•é™æ€å¯¼å‡ºï¼š

```bash
# æ„å»ºé™æ€æ–‡ä»¶
pnpm build

# ä½¿ç”¨ä»»æ„é™æ€æœåŠ¡å™¨é¢„è§ˆ
npx serve out

# æˆ–ä½¿ç”¨ http-server
npx http-server out
```

## ğŸ“Š æ„å»ºæˆåŠŸæ ‡å¿—

æ„å»ºæˆåŠŸåï¼Œä½ ä¼šçœ‹åˆ°ï¼š

```
âœ“ Generating static pages (14/14)
âœ“ Finalizing page optimization
âœ“ Collecting build traces
âœ“ Export successful. Files written to out
```

## ğŸŒ è‡ªå®šä¹‰åŸŸå

éƒ¨ç½²æˆåŠŸåï¼Œå¯ä»¥åœ¨ Cloudflare Pages è®¾ç½®ä¸­ï¼š

1. è¿›å…¥é¡¹ç›®è®¾ç½®
2. ç‚¹å‡» **Custom domains**
3. æ·»åŠ ä½ çš„åŸŸå
4. æŒ‰ç…§æç¤ºé…ç½® DNS

## ğŸ”„ è‡ªåŠ¨éƒ¨ç½²

è¿æ¥ Git ä»“åº“åï¼Œæ¯æ¬¡æ¨é€ä»£ç éƒ½ä¼šè‡ªåŠ¨è§¦å‘æ„å»ºå’Œéƒ¨ç½²ï¼š

- `main` åˆ†æ”¯ â†’ ç”Ÿäº§ç¯å¢ƒ
- å…¶ä»–åˆ†æ”¯ â†’ é¢„è§ˆç¯å¢ƒï¼ˆç‹¬ç«‹ URLï¼‰

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œæ£€æŸ¥ï¼š

1. æ„å»ºæ—¥å¿—ä¸­æ˜¯å¦æœ‰é”™è¯¯
2. Node.js ç‰ˆæœ¬æ˜¯å¦æ­£ç¡®ï¼ˆ18+ï¼‰
3. æ‰€æœ‰ä¾èµ–æ˜¯å¦æ­£ç¡®å®‰è£…
4. `out` ç›®å½•æ˜¯å¦æ­£ç¡®ç”Ÿæˆ

---

**é¡¹ç›®**: æ™ºæ…§å®‰æ£€ç®¡ç†å¹³å°  
**æ¡†æ¶**: Next.js 15 + React 18  
**éƒ¨ç½²å¹³å°**: Cloudflare Pages

